<!DOCTYPE html>
<html lang="en">

<head style="margin: 0;">
    <script type="text/javascript" src="client/hebcal.js"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>ספירת העומר</title>
</head>

<body>
    <div id="omer" style="width: 100%; height: 100%; display: flex;">
        <h1 id="time" style="position: fixed; top: 150px; right: 184px; z-index: 9;"></h1>
        <h1 id="shma" style="position: fixed; top: -5px; left: 800px; z-index: 10;"></h1>
        <h1 id="sunset" style="position: fixed; top: 150px; left: 185px; z-index: 10;"></h1>
        <img alt="יש שגיאה במערכת" style="width: 100%; height: 100%; position: fixed; top: 0; left: 0;">
    </div>
    <script type="text/javascript">
        function refresh() {
            let date = new Date();
            document.querySelector('#time').innerText = format_time(date);

            date = date.setMinutes(date.getMinutes() - 18);
            var day = new Hebcal.HDate();
            if (day.sunset() < date) {
                day = day.next();
            }
            var omerDay = day.omer();
            document.querySelector('#omer img').src = 'images/SfiratHaomer' + omerDay + '.jpg';
            document.querySelector('#sunset').innerText = 'שקיעה  ' + format_time(day.sunset());
            document.querySelector('#shma').innerText = 'סו"ז קר"ש ב  ' + format_time(day.getZemanim().sof_zman_shma);
            setTimeout('refresh()', 1000);



        }

        function format_time(date) {
            return pad(date.getHours()) + ':' + pad(date.getMinutes()) + ':' + pad(date.getSeconds());
        }

        function pad(n) {
            return (n < 10) ? ("0" + n) : n;
        }
        Hebcal.events.on('ready', refresh());
    </script>
</body>

</html>

</html>